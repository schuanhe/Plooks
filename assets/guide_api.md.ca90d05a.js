import{_ as s,o as a,c as n,a as l}from"./app.a12f6983.js";const h=JSON.parse('{"title":"后端部署","description":"","frontmatter":{},"headers":[{"level":3,"title":"部署前准备","slug":"部署前准备","link":"#部署前准备","children":[]},{"level":3,"title":"配置后端文件","slug":"配置后端文件","link":"#配置后端文件","children":[]},{"level":3,"title":"打包","slug":"打包","link":"#打包","children":[]},{"level":3,"title":"运行","slug":"运行","link":"#运行","children":[]},{"level":3,"title":"Docker部署","slug":"docker部署","link":"#docker部署","children":[]}],"relativePath":"guide/api.md"}'),e={name:"guide/api.md"},p=l(`<h1 id="后端部署" tabindex="-1">后端部署 <a class="header-anchor" href="#后端部署" aria-hidden="true">#</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>后端使用springboot开发，需要安装好java,Maven环境，数据库使用mysql,redis需要安装好mysql和redis。其中mysql的sql文件位于<code>docs/data/sql</code>中</p></div><h3 id="部署前准备" tabindex="-1">部署前准备 <a class="header-anchor" href="#部署前准备" aria-hidden="true">#</a></h3><ol><li>该项目使用了七牛云的对象存储，需要在七牛云上创建一个对象存储空间</li><li>该项目使用了邮箱验证码功能，需要在邮箱中开启smtp服务，获取邮箱的授权码</li></ol><h3 id="配置后端文件" tabindex="-1">配置后端文件 <a class="header-anchor" href="#配置后端文件" aria-hidden="true">#</a></h3><p>打开 <code>sercver/src/main/resources/application.yml</code>文件，根据其中的注释修改配置文件并保存</p><h3 id="打包" tabindex="-1">打包 <a class="header-anchor" href="#打包" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 进入server目录</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 打包</span></span>
<span class="line"><span style="color:#FFCB6B;">mvn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package</span></span>
<span class="line"></span></code></pre></div><h3 id="运行" tabindex="-1">运行 <a class="header-anchor" href="#运行" aria-hidden="true">#</a></h3><p>直接运行jar包 其中后端默认端口为2023，如需修改请修改<code>application.yml</code>中的<code>server.port</code>属性</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 进入server目录</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 运行jar包</span></span>
<span class="line"><span style="color:#FFCB6B;">java</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-jar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">target/server-</span><span style="color:#F78C6C;">1.0</span><span style="color:#C3E88D;">-SNAPSHOT.jar</span></span>
<span class="line"></span></code></pre></div><h3 id="docker部署" tabindex="-1">Docker部署 <a class="header-anchor" href="#docker部署" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>在使用docker安装之前，需要安装好docker docker镜像可能会更新慢</p></div><p>直接使用docker镜像部署</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MY_MAIL_HOST=smtp.exmail.qq.com</span><span style="color:#A6ACCD;"> \\ </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#FFCB6B;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MY_MAIL_USERNAME=xxx@qq.com</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MY_MAIL_PASSWORD=xxxxxxxx</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MY_MAIL_PORT=</span><span style="color:#F78C6C;">465</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MY_QINIU_ACCESS=xxxxxxxxxxxxxx</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MY_QINIU_SECRET=xxxxxxxxxxxxxxxxxx</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MY_QINIU_BUCKET=xxxx</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MY_QINIU_PATH=http://xxx.xxx/</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2023</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">2023</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">schuanhe/plooks-api</span></span>
<span class="line"></span></code></pre></div><p>环境变量说明</p><table><thead><tr><th>环境变量</th><th>说明</th></tr></thead><tbody><tr><td>MY_MAIL_HOST</td><td>邮箱smtp地址</td></tr><tr><td>MY_MAIL_USERNAME</td><td>邮箱用户名</td></tr><tr><td>MY_MAIL_PASSWORD</td><td>邮箱授权码</td></tr><tr><td>MY_MAIL_PORT</td><td>邮箱端口</td></tr><tr><td>MY_QINIU_ACCESS</td><td>七牛云accessKey</td></tr><tr><td>MY_QINIU_SECRET</td><td>七牛云secretKey</td></tr><tr><td>MY_QINIU_BUCKET</td><td>七牛云存储空间名称</td></tr><tr><td>MY_QINIU_PATH</td><td>七牛云存储空间域名</td></tr></tbody></table>`,17),t=[p];function o(c,r,d,i,C,y){return a(),n("div",null,t)}const D=s(e,[["render",o]]);export{h as __pageData,D as default};
